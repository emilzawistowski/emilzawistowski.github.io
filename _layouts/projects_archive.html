---
layout: default
---

{% if page.header.overlay_color or page.header.overlay_image or page.header.image %}
  {% include page__hero.html %}
{% endif %}

{% if page.url != "/" and site.breadcrumbs %}
  {% unless paginator %}
    {% include breadcrumbs.html %}
  {% endunless %}
{% endif %}

<div id="main" role="main">
  {% include sidebar.html %}

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    {% if page.title %}<meta itemprop="headline" content="{{ page.title | markdownify | strip_html | strip_newlines | escape_once }}">{% endif %}
    <div class="page__inner-wrap">
      <header>
        {% if page.title %}<h1 id="page-title" class="page__title" itemprop="headline">{{ page.title | markdownify | remove: "<p>" | remove: "</p>" }}</h1>{% endif %}
      </header>

      <section class="page__content" itemprop="text">
        {{ content }}
        
        {% comment %}
        Determine which collection to use based on page.collection variable
        {% endcomment %}
        
        {% if page.collection == "research_projects" %}
          {% assign all_projects = site.research_projects %}
        {% elsif page.collection == "creative_projects" %}
          {% assign all_projects = site.creative_projects %}
        {% else %}
          {% assign all_projects = site.research_projects %}
        {% endif %}
        
        {% comment %}
        Sort projects by date (newest first)
        {% endcomment %}
        {% assign projects = site.research_projects | concat: site.creative_projects %}
        
        {% comment %}
        Separate featured and non-featured projects
        {% endcomment %}
        {% assign featured_projects = sorted_projects | where: "featured", true %}
        {% assign regular_projects = sorted_projects | where_exp: "item", "item.featured != true" %}
        
        {% comment %}
        Featured Projects Section
        {% endcomment %}
        {% if featured_projects.size > 0 %}
        <div class="projects-featured">
          <h2>Featured Projects</h2>
          <div class="projects-grid">
            {% for project in featured_projects limit:4 %}
              {% include project_card.html project=project %}
            {% endfor %}
          </div>
        </div>
        {% endif %}
        
        {% comment %}
        All Projects Section
        {% endcomment %}
        <div class="projects-archive">
          <h2>All Projects</h2>
          
          {% comment %}
          Optional: Add simple filter controls here in the future
          <div class="projects-filters">
            Filter by: Type | Year | Tag
          </div>
          {% endcomment %}
          
          <div class="projects-grid">
            {% for project in regular_projects %}
              {% include project_card.html project=project %}
            {% endfor %}
          </div>
          
          {% if regular_projects.size == 0 %}
            <p><em>No projects to display yet.</em></p>
          {% endif %}
        </div>
      </section>

      <footer class="page__meta">
        {% if site.data.ui-text[site.locale].meta_label %}
          <h4 class="page__meta-title">{{ site.data.ui-text[site.locale].meta_label }}</h4>
        {% endif %}
      </footer>
    </div>
  </article>
</div>